function Game(){this.leaderboard=$("table#leaderboard");this.history=$("table#history");this.tl=new TimelineLite();var a=this;$("button[name=guess]").click(function(b){b.preventDefault();var c=$(this).val();a.saveGuess(c)})}Game.prototype.refresh=function(){var b=this,a=function(e){var c=b.history.children("tbody"),g={"1":["trending_up","Guessed the next earthquake would be higher"],"-1":["trending_down","Guessed the next earthquake would be lower"]},d={"1":["check","Correct"],"0":["clear","Incorrect"],"null":["remove","Waiting for the next earthquake"]};c.html("");e.history.slice(0,5).forEach(function(i){var h=b.iconfy(g,i.guess)+b.iconfy(d,i.correct),j=[i.name,moment(i.timestamp).format("YYYY-MM-DD [at] h:mm:ss A"),h];c.append(b.rowify(j))});var f=e.history.filter(function(h){return h.correct===1}).length;$("#game-score .detail").text(f);c=b.leaderboard.children("tbody");c.html("");e.leaderboard.forEach(function(h){var i=[h.username,h.score];c.append(b.rowify(i))})};return $.get("./game").done(a)};Game.prototype.saveGuess=function(d){var b=this,a=function(){b.refresh()},c=function(){b.tl.to(".account .material-icons",1,{rotation:"+=360",ease:Bounce.easeOut})};$.post("/game",{guess:d}).done(a).fail(c)};Game.prototype.iconfy=function(b,a){return"<i class='material-icons' title='"+b[a][1]+"'>"+b[a][0]+"</i>"};Game.prototype.rowify=function(a){return"<tr>"+a.map(function(b){return"<td>"+b+"</td>"}).reduce(function(d,c){return d+c})+"</tr>"};